version = '1.00-SNAPSHOT'
group = 'ru.yandex.android.tools'

apply plugin: 'groovy'
apply plugin: 'maven'

repositories {
    ivy{name "local"; url 'file://' + new File(System.getProperty('user.home'), '.yandex/ivy-repo').absolutePath}
    mavenCentral()
}

dependencies {
    compile gradleApi()
    groovy localGroovy()
}

// custom tasks for creating source jar
task sourcesJar(type: Jar, dependsOn:classes) {
	classifier = 'sources'
	from sourceSets.main.allSource
}
// custom tasks for creating javadoc jar
task groovydocJar(type: Jar, dependsOn:groovydoc) {
	classifier = 'javadoc'
    from groovydoc.destinationDir
}
// add the jars as artifacts
artifacts {
	archives sourcesJar
	archives groovydocJar
}

uploadArchives {
   repositories {
       add project.repositories.local
   }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.2'
}

// Make sure all code is compiled, tested and checked before uploadArchives.
uploadArchives.dependsOn ':build'